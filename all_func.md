# IntelliRefactor - Полное описание функционала

## Оглавление
1. [Основные команды](#основные-команды)
2. [Анализ кода](#анализ-кода)
3. [Обнаружение дубликатов](#обнаружение-дубликатов)
4. [Неиспользуемый код](#неиспользуемый-код)
5. [Архитектурные запахи](#архитектурные-запахи)
6. [Кластеризация ответственностей](#кластеризация-ответственностей)
7. [Принятие решений о рефакторинге](#принятие-решений-о-рефакторинге)
8. [Рефакторинг](#рефакторинг)
9. [Генерация документации](#генерация-документации)
10. [Визуализация](#визуализация)
11. [Управление знаниями](#управление-знаниями)
12. [Индексация](#индексация)
13. [Настройка и конфигурация](#настройка-и-конфигурация)
14. [Экспертный анализ](#экспертный-анализ)
15. [Аудит проекта](#аудит-проекта)
16. [Шаблоны](#шаблоны)
17. [Системные команды](#системные-команды)

---

## Основные команды

### Базовая помощь
```bash
python intellirefactor --help
```
Показывает все доступные команды и глобальные опции.

### Глобальные опции
- `--config`, `-c` - путь к файлу конфигурации
- `--verbose`, `-v` - подробный вывод и отладочное логирование
- `--no-rich` - отключить красивый терминальный вывод
- `--no-color` - отключить цветной вывод
- `--machine-readable` - вывод в машиночитаемом формате (JSON)
- `--version` - показать версию программы

---

## Анализ кода

### Базовый анализ проекта
```bash
python intellirefactor analyze <path>
```
**Что делает:** Анализирует проект или файл на наличие возможностей для рефакторинга.

**Опции:**
- `--output`, `-o` - файл для сохранения результатов анализа
- `--format` - формат вывода: `json`, `text` (по умолчанию: text)
- `--no-metrics` - пропустить расчет детальных метрик
- `--no-opportunities` - пропустить идентификацию возможностей рефакторинга
- `--project-root` - корневая директория проекта для кросс-модульного анализа
- `--isolated` - выполнить изолированный анализ (без проверок между модулями)
- `--entry-point` - главный скрипт для трассировки потока выполнения
- `--visualize` - генерировать диаграммы Mermaid

**Что получаем:** Метрики кода, возможности для рефакторинга, предупреждения и ошибки.

### Поиск возможностей рефакторинга
```bash
python intellirefactor opportunities <path>
```
**Что делает:** Идентифицирует и перечисляет возможности для рефакторинга.

**Опции:**
- `--limit`, `-l` - максимальное количество возможностей для показа (по умолчанию: 10)
- `--output`, `-o` - файл для сохранения списка возможностей
- `--format` - формат вывода: `json`, `text` (по умолчанию: text)

**Что получаем:** Список конкретных возможностей рефакторинга с описаниями и приоритетами.

### Расширенный анализ
```bash
python intellirefactor analyze-enhanced <project_path>
```
**Что делает:** Расширенный анализ проекта с богатым терминальным выводом и полной интеграцией.

**Опции:**
- `--output`, `-o` - файл для результатов анализа
- `--format` - формат вывода: `json`, `markdown`, `html` (по умолчанию: markdown)
- `--include-metrics` - включить детальный анализ метрик (по умолчанию: включено)
- `--include-opportunities` - включить возможности рефакторинга (по умолчанию: включено)
- `--include-safety` - включить анализ безопасности (по умолчанию: включено)
- `--interactive` - запуск в интерактивном режиме с запросами

**Что получаем:** Комплексный анализ с метриками, возможностями, безопасностью и рекомендациями.

---

## Обнаружение дубликатов

### Блок-уровневые дубликаты
```bash
python intellirefactor duplicates blocks <project_path>
```
**Что делает:** Обнаруживает дубликаты кода на уровне блоков.

**Опции:**
- `--exact-threshold` - порог схожести для точных дубликатов (по умолчанию: 0.95)
- `--structural-threshold` - порог схожести для структурных дубликатов (по умолчанию: 0.85)
- `--semantic-threshold` - порог схожести для семантических дубликатов (по умолчанию: 0.75)
- `--min-clone-size` - минимальный размер (строки кода) для обнаружения (по умолчанию: 3)
- `--min-instances` - минимальное количество экземпляров для группы дубликатов (по умолчанию: 2)
- `--include-patterns` - паттерны файлов для включения (по умолчанию: **/*.py)
- `--exclude-patterns` - паттерны файлов для исключения (по умолчанию: тестовые файлы)
- `--output`, `-o` - файл для результатов
- `--format` - формат вывода: `json`, `text`, `html` (по умолчанию: text)
- `--show-code` - включить сниппеты кода в вывод
- `--group-by` - группировка результатов по типу, файлу или схожести (по умолчанию: type)

**Что получаем:** Группы дубликатов кода с уровнями схожести, местоположением и рекомендациями по устранению.

### Метод-уровневые дубликаты
```bash
python intellirefactor duplicates methods <project_path>
```
**Что делает:** Обнаруживает дубликаты на уровне методов.

**Опции:**
- `--similarity-threshold` - порог схожести для методов (по умолчанию: 0.8)
- `--min-method-size` - минимальный размер метода (строки кода) (по умолчанию: 5)
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--output`, `-o` - файл для результатов
- `--format` - формат вывода
- `--show-signatures` - включить сигнатуры методов в вывод
- `--extraction-recommendations` - включить рекомендации по стратегии извлечения

**Что получаем:** Схожие методы с рекомендациями по консолидации.

### Семантическая схожесть
```bash
python intellirefactor duplicates similar <project_path>
```
**Что делает:** Находит семантически схожие методы.

**Опции:**
- `--target-method` - конкретный метод для поиска схожести (формат: module.ClassName.method_name)
- `--similarity-types` - типы схожести: `structural`, `functional`, `behavioral`, `hybrid` (по умолчанию: все типы)
- `--structural-threshold` - минимум для структурных совпадений (по умолчанию: 0.8)
- `--functional-threshold` - минимум для функциональных совпадений (по умолчанию: 0.7)
- `--behavioral-threshold` - минимум для поведенческих совпадений (по умолчанию: 0.6)
- `--min-confidence` - минимальный порог уверенности (по умолчанию: 0.5)
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--output`, `-o` - файл для результатов
- `--format` - формат вывода
- `--show-evidence` - включить доказательства и сниппеты кода
- `--show-differences` - показать различия между схожими методами
- `--merge-recommendations` - включить рекомендации по стратегии слияния
- `--max-results` - максимум совпадений для показа (по умолчанию: 20)

**Что получаем:** Семантически схожие методы с детальным анализом различий и рекомендациями по объединению.

---

## Неиспользуемый код

### Обнаружение неиспользуемого кода
```bash
python intellirefactor unused detect <project_path>
```
**Что делает:** Обнаруживает неиспользуемый код на нескольких уровнях.

**Опции:**
- `--entry-points` - точки входа (автоопределение если не указаны)
- `--level` - уровень анализа: `1`=модули, `2`=символы, `3`=динамический, `all`=все уровни (по умолчанию: all)
- `--min-confidence` - минимальный порог уверенности (0.0-1.0, по умолчанию: 0.5)
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--filter-type` - фильтр по типу неиспользуемого кода:
  - `module_unreachable` - недостижимые модули
  - `symbol_unused` - неиспользуемые символы
  - `private_method_unused` - неиспользуемые приватные методы
  - `public_export_unused` - неиспользуемые публичные экспортные
  - `tests_only` - только в тестах
  - `scripts_only` - только в скриптах
  - `uncertain_dynamic` - неопределенные динамические
- `--show-evidence` - включить детальные доказательства
- `--show-usage` - включить ссылки использования
- `--output`, `-o` - файл для результатов
- `--format` - формат вывода: `json`, `text`, `html` (по умолчанию: text)
- `--group-by` - группировка по типу, файлу или уверенности (по умолчанию: type)

**Что получаем:** Перечень неиспользуемого кода с уровнями уверенности, доказательствами и рекомендациями по удалению.

---

## Архитектурные запахи

### Обнаружение архитектурных запахов
```bash
python intellirefactor smells detect <project_path>
```
**Что делает:** Обнаруживает архитектурные запахи в проекте.

**Опции:**
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--smell-types` - конкретные типы запахов:
  - `god_class` - класс-бог
  - `long_method` - длинный метод
  - `high_complexity` - высокая сложность
  - `srp_violation` - нарушение SRP
  - `feature_envy` - зависть к функционалу
  - `inappropriate_intimacy` - неприемлемая близость
- `--severity` - минимальный уровень серьезности: `critical`, `high`, `medium`, `low`
- `--min-confidence` - минимальный порог уверенности (по умолчанию: 0.5)
- `--output`, `-o` - файл для результатов
- `--format` - формат вывода
- `--show-evidence` - включить детальные доказательства
- `--show-recommendations` - включить рекомендации по исправлению
- `--group-by` - группировка по файлу, типу или серьезности (по умолчанию: file)

**Пороговые значения:**
- `--god-class-methods` - порог методов для класса-бога (по умолчанию: 15)
- `--god-class-responsibilities` - порог ответственностей для класса-бога (по умолчанию: 3)
- `--long-method-lines` - порог строк для длинного метода (по умолчанию: 30)
- `--high-complexity-cyclomatic` - порог цикломатической сложности (по умолчанию: 10)

**Что получаем:** Список архитектурных запахов с серьезностью, доказательствами и рекомендациями по устранению.

---

## Кластеризация ответственностей

### Кластеризация по ответственностям
```bash
python intellirefactor cluster responsibility <project_path>
```
**Что делает:** Кластеризует методы по общим ответственностям для извлечения компонентов.

**Опции:**
- `--class-name` - конкретное имя класса для анализа (опционально)
- `--file-path` - конкретный путь к файлу для анализа (опционально)
- `--min-confidence` - минимальный порог уверенности для кластеризации (по умолчанию: 0.7)
- `--min-cohesion` - минимальный коэффициент связности для кластеров (по умолчанию: 0.6)
- `--min-cluster-size` - минимальное количество методов в кластере (по умолчанию: 3)
- `--max-cluster-size` - максимальное количество методов в кластере (по умолчанию: 8)
- `--algorithm` - алгоритм кластеризации: `community_detection`, `agglomerative`, `hybrid` (по умолчанию: hybrid)
- `--output` - формат вывода: `text`, `json`, `html` (по умолчанию: text)
- `--output-file` - путь к файлу вывода (опционально)
- `--show-suggestions` - показать предложения по извлечению компонентов
- `--show-interfaces` - показать сгенерированные интерфейсы компонентов
- `--show-plans` - показать детальные планы извлечения
- `--group-by` - группировка по классу, уверенности или сложности (по умолчанию: class)

**Что получаем:** Кластеры методов с общими ответственностями, предложения по извлечению компонентов и интерфейсы.

---

## Принятие решений о рефакторинге

### Комплексный анализ с приоритетами
```bash
python intellirefactor decide analyze <project_path>
```
**Что делает:** Комплексный анализ проекта с приоритизированными решениями о рефакторинге.

**Опции:**
- `--criteria-config` - путь к файлу конфигурации критериев принятия решений
- `--min-confidence` - минимальный порог уверенности (по умолчанию: 0.7)
- `--min-impact` - минимальный порог влияния (по умолчанию: 0.5)
- `--max-effort` - максимальный порог усилий (по умолчанию: 0.8)
- `--output`, `-o` - файл для результатов анализа решений
- `--format` - формат вывода: `json`, `yaml`, `text` (по умолчанию: text)
- `--export-decisions` - экспорт решений в машиночитаемый файл

**Что получаем:** Приоритизированный список решений о рефакторинге с оценкой влияния, усилий и рисков.

### Получение рекомендаций
```bash
python intellirefactor decide recommend <analysis_file>
```
**Что делает:** Получает конкретные рекомендации по рефакторингу с фильтрацией.

**Опции:**
- `--priority` - фильтр по уровню приоритета: `critical`, `high`, `medium`, `low`
- `--type` - фильтр по типу рефакторинга:
  - `extract_method` - извлечение метода
  - `extract_class` - извлечение класса
  - `remove_unused_code` - удаление неиспользуемого кода
  - `decompose_god_class` - декомпозиция класса-бога
  - `reduce_method_complexity` - снижение сложности метода
  - `eliminate_duplicates` - устранение дубликатов
  - `improve_cohesion` - улучшение связности
  - `reduce_coupling` - снижение связанности
  - `parameterize_duplicates` - параметризация дубликатов
  - `template_method_pattern` - паттерн шаблонного метода
- `--min-confidence` - минимальный порог уверенности
- `--limit`, `-l` - максимум рекомендаций для показа (по умолчанию: 10)
- `--output`, `-o` - файл для рекомендаций
- `--format` - формат вывода
- `--include-evidence` - включить детальные доказательства
- `--include-plans` - включить планы реализации

**Что получаем:** Отфильтрованные рекомендации по рефакторингу с доказательствами и планами реализации.

### Генерация плана выполнения
```bash
python intellirefactor decide plan <analysis_file>
```
**Что делает:** Генерирует последовательность рефакторинга и план выполнения.

**Опции:**
- `--priority-filter` - включить только указанные уровни приоритета (можно использовать несколько раз)
- `--max-decisions` - максимум решений в плане (по умолчанию: 20)
- `--sequence-by` - последовательность по: `priority`, `dependency`, `effort`, `risk` (по умолчанию: priority)
- `--output`, `-o` - файл для плана выполнения
- `--format` - формат вывода: `json`, `yaml`, `text`, `markdown` (по умолчанию: text)
- `--include-timeline` - включить примерные сроки в план
- `--include-resources` - включить требования к ресурсам в план

**Что получаем:** Стратегический план рефакторинга с последовательностью, сроками и требованиями к ресурсам.

---

## Рефакторинг

### Автоматический рефакторинг
```bash
python intellirefactor refactor <project_path>
```
**Что делает:** Выполняет операции автоматического рефакторинга.

**Опции:**
- `--strategy` - стратегия рефакторинга для использования
- `--dry-run` - показать что будет сделано без применения изменений
- `--max-operations` - максимальное количество операций рефакторинга
- `--safety-level` - уровень безопасности: `conservative`, `moderate`, `aggressive`
- `--output`, `-o` - файл для результатов рефакторинга
- `--no-validation` - пропустить валидацию результатов рефакторинга

**Что получаем:** Примененные изменения в коде с валидацией и отчетом об операциях.

### Расширенный рефакторинг
```bash
python intellirefactor refactor-enhanced <project_path> <plan_file>
```
**Что делает:** Расширенный рефакторинг с полной оркестрацией и проверками безопасности.

**Опции:**
- `--dry-run` - выполнить пробный запуск без изменений
- `--create-backup` - создать резервную копию перед рефакторингом (по умолчанию: включено)
- `--interactive` - запуск в интерактивном режиме с подтверждениями
- `--output`, `-o` - файл для результатов рефакторинга

**Что получаем:** Безопасный рефакторинг с резервными копиями, интерактивными подтверждениями и подробным отчетом.

### Применение конкретной возможности
```bash
python intellirefactor apply <opportunity_file>
```
**Что делает:** Применяет конкретную возможность рефакторинга из файла JSON.

**Опции:**
- `--dry-run` - показать что будет сделано без применения изменений
- `--no-validation` - пропустить валидацию результатов
- `--output`, `-o` - файл для результатов рефакторинга

**Что получаем:** Применение одной конкретной возможности рефакторинга с валидацией.

---

## Генерация документации

### Генерация спецификаций
```bash
python intellirefactor generate spec <project_path>
```
**Что делает:** Генерирует спецификационные документы (Requirements.md, Design.md, Implementation.md).

**Опции:**
- `--spec-type` - тип спецификации: `requirements`, `design`, `implementation`, `all` (по умолчанию: all)
- `--output-dir`, `-o` - директория для сгенерированных спецификаций
- `--template` - пользовательский файл шаблона
- `--include-index` - включить построение индекса в анализ
- `--include-duplicates` - включить обнаружение дубликатов
- `--include-unused` - включить обнаружение неиспользуемого кода
- `--min-confidence` - минимальный порог уверенности (по умолчанию: 0.5)
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--emit-json` - также генерировать машиночитаемые JSON артефакты
- `--json-output` - путь для JSON артефактов

**Что получаем:** Комплект спецификационных документов для проекта.

### Генерация документации по модулям
```bash
python intellirefactor docs generate <target_file>
```
**Что делает:** Генерирует комплексный набор документации.

**Опции:**
- `--output-dir`, `-o` - директория для файлов документации
- `--include` - типы документации для включения:
  - `architecture` - архитектурная документация
  - `flowchart` - блок-схемы
  - `call_graph` - граф вызовов
  - `report` - отчеты
  - `registry` - реестры
  - `llm_context` - контекст для LLM
  - `project_structure` - структура проекта
- `--format` - формат вывода: `markdown`, `html` (по умолчанию: markdown)

**Что получаем:** Полный набор документации для целевого файла.

### Генерация конкретного типа документации
```bash
python intellirefactor docs type <target_file> <doc_type>
```
**Что делает:** Генерирует конкретный тип документации.

**Типы документации:**
- `architecture` - архитектурная документация
- `flowchart` - блок-схема
- `call_graph` - граф вызовов
- `report` - отчет
- `registry` - реестр
- `llm_context` - контекст для LLM
- `project_structure` - структура проекта

**Опции:**
- `--output`, `-o` - путь к файлу вывода (опционально)

**Что получаем:** Конкретный тип документации для целевого файла.

### Список доступных типов документации
```bash
python intellirefactor docs list
```
**Что делает:** Перечисляет доступные типы документации.

**Что получаем:** Список всех доступных типов генерируемой документации.

---

## Визуализация

### Визуализация метода
```bash
python intellirefactor visualize method <file_path> <method_name>
```
**Что делает:** Генерирует блок-схему для метода.

**Опции:**
- `--output`, `-o` - файл для визуализации
- `--format` - формат вывода: `mermaid`, `png`, `svg` (по умолчанию: mermaid)

**Что получаем:** Блок-схема потока выполнения метода в формате Mermaid.

### Визуализация графа вызовов
```bash
python intellirefactor visualize call-graph <symbol_name>
```
**Что делает:** Генерирует граф зависимостей вызовов.

**Опции:**
- `--max-depth` - максимальная глубина графа (по умолчанию: 3)
- `--output`, `-o` - файл для визуализации

**Что получаем:** Диаграмма зависимостей вызовов в формате Mermaid.

---

## Управление знаниями

### Запрос к базе знаний
```bash
python intellirefactor knowledge query <query>
```
**Что делает:** Запрашивает базу знаний.

**Опции:**
- `--limit` - максимальное количество результатов (по умолчанию: 10)
- `--output`, `-o` - файл для результатов запроса

**Что получаем:** Результаты поиска по базе знаний с описаниями и уровнями уверенности.

### Добавление знаний
```bash
python intellirefactor knowledge add <knowledge_file>
```
**Что делает:** Добавляет элемент знаний из файла JSON.

**Что получаем:** Подтверждение добавления элемента знаний в базу.

### Статус базы знаний
```bash
python intellirefactor knowledge status
```
**Что делает:** Показывает статус базы знаний.

**Что получаем:** Информацию о состоянии базы знаний и пути к ней.

---

## Индексация

### Построение индекса
```bash
python intellirefactor index build <project_path>
```
**Что делает:** Строит или обновляет индекс проекта.

**Опции:**
- `--incremental`, `-i` - выполнить инкрементальное обновление (по умолчанию: True)
- `--full`, `-f` - принудительно перестроить индекс полностью
- `--batch-size`, `-b` - размер пакета для обработки файлов (по умолчанию: 100)
- `--output`, `-o` - файл для результатов построения
- `--format` - формат вывода

**Что получаем:** Постоянный индекс данных анализа для быстрых повторных анализов.

### Статус индекса
```bash
python intellirefactor index status [project_path]
```
**Что делает:** Показывает статус и статистику индекса.

**Опции:**
- `--detailed`, `-d` - показать детальную статистику
- `--format` - формат вывода

**Что получаем:** Статистику индекса: количество файлов, символов, блоков, зависимостей.

### Перестроение индекса
```bash
python intellirefactor index rebuild <project_path>
```
**Что делает:** Полностью перестраивает индекс с нуля.

**Опции:**
- `--batch-size`, `-b` - размер пакета для обработки файлов
- `--output`, `-o` - файл для результатов перестроения
- `--format` - формат вывода

**Что получаем:** Полностью новый индекс проекта.

---

## Настройка и конфигурация

### Показ текущей конфигурации
```bash
python intellirefactor config show
```
**Что делает:** Показывает текущую конфигурацию IntelliRefactor.

**Что получаем:** Сводку текущих настроек конфигурации.

### Инициализация конфигурации
```bash
python intellirefactor config init [--path <config_file>] [--template <template_name>] [--format <json|yaml>]
```
**Что делает:** Инициализирует файл конфигурации.

**Опции:**
- `--path` - путь к файлу конфигурации (по умолчанию: intellirefactor.json)
- `--template` - шаблон конфигурации для использования
- `--format` - формат файла конфигурации: `json`, `yaml` (по умолчанию: json)

**Что получаем:** Новый файл конфигурации, готовый для настройки.

### Валидация конфигурации
```bash
python intellirefactor config validate <config_file>
```
**Что делает:** Проверяет файл конфигурации на валидность.

**Что получаем:** Подтверждение валидности или список ошибок конфигурации.

---

## Экспертный анализ

### Экспертный анализ рефакторинга
```bash
python intellirefactor expert-analyze <project_path> <target_file>
```
**Что делает:** Запускает экспертный анализ рефакторинга для безопасной реструктуризации кода.

**Опции:**
- `--output`, `-o` - директория для результатов анализа (по умолчанию: ./expert_analysis)
- `--format` - формат вывода: `json`, `markdown`, `both` (по умолчанию: both)
- `--detailed` - экспортировать детальные данные анализа как требуют эксперты (включает полный граф вызовов, конкретные местоположения, исполняемые тесты)
- `--verbose`, `-v` - включить подробный вывод

**Что получаем:** Комплексный экспертный анализ с графами вызовов, конкретными местоположениями и тестами для безопасного рефакторинга.

---

## Аудит проекта

### Комплексный аудит проекта
```bash
python intellirefactor audit <project_path>
```
**Что делает:** Комплексный аудит проекта, сочетающий несколько типов анализа.

**Опции:**
- `--skip-index` - пропустить построение индекса (использовать существующий индекс)
- `--skip-duplicates` - пропустить обнаружение дубликатов кода
- `--skip-unused` - пропустить обнаружение неиспользуемого кода
- `--min-confidence` - минимальный порог уверенности (по умолчанию: 0.5)
- `--include-patterns` - паттерны файлов для включения
- `--exclude-patterns` - паттерны файлов для исключения
- `--output`, `-o` - файл для результатов аудита
- `--format` - формат вывода: `json`, `text`, `html` (по умолчанию: text)
- `--emit-spec` - генерировать Requirements.md спецификацию из находок
- `--spec-output` - путь для сгенерированной спецификации (по умолчанию: Requirements.md)
- `--emit-json` - генерировать машиночитаемые JSON артефакты анализа
- `--json-output` - путь для JSON артефактов (по умолчанию: analysis.json)

**Что получаем:** Комплексный аудит с метриками, дубликатами, неиспользуемым кодом, запахами и спецификациями.

---

## Шаблоны

### Список шаблонов
```bash
python intellirefactor template list
```
**Что делает:** Перечисляет доступные шаблоны конфигурации.

**Что получаем:** Список всех доступных шаблонов с описаниями.

### Генерация из шаблона
```bash
python intellirefactor template generate <template_name> <output_path> [--format <json|yaml>] [--project-name <name>] [--safety-level <level>]
```
**Что делает:** Генерирует конфигурацию из шаблона.

**Опции:**
- `--format` - формат вывода: `json`, `yaml` (по умолчанию: json)
- `--project-name` - имя проекта для кастомизации
- `--safety-level` - уровень безопасности рефакторинга: `conservative`, `moderate`, `aggressive` (по умолчанию: moderate)

**Что получаем:** Файл конфигурации, сгенерированный из шаблона с пользовательскими настройками.

### Просмотр шаблона
```bash
python intellirefactor template show <template_name> [--format <json|yaml>]
```
**Что делает:** Показывает содержимое шаблона.

**Опции:**
- `--format` - формат отображения: `json`, `yaml` (по умолчанию: json)

**Что получаем:** Содержимое шаблона конфигурации.

---

## Системные команды

### Статус системы
```bash
python intellirefactor system status [--check-compatibility] [--show-plugins]
```
**Что делает:** Показывает комплексный статус системы с богатым выводом.

**Опции:**
- `--check-compatibility` - включить проверку совместимости с существующими системами
- `--show-plugins` - показать детальную информацию о плагинах

**Что получаем:** Комплексный статус системы, информацию о совместимости и плагинах.

### Инициализация системы
```bash
python intellirefactor system init <project_path> [--create-config] [--setup-knowledge] [--load-plugins]
```
**Что делает:** Инициализирует IntelliRefactor для проекта с полной интеграцией.

**Опции:**
- `--create-config` - создать файл конфигурации по умолчанию
- `--setup-knowledge` - инициализировать базу знаний для проекта
- `--load-plugins` - загрузить и инициализировать плагины

**Что получаем:** Полностью настроенную среду IntelliRefactor для проекта.

### Миграция данных
```bash
python intellirefactor system migrate <legacy_data_path> [--output <output_path>] [--format <json|yaml>]
```
**Что делает:** Мигрирует устаревшие данные в современный формат.

**Опции:**
- `--output`, `-o` - путь вывода для мигрированных данных
- `--format` - формат вывода для мигрированных данных: `json`, `yaml` (по умолчанию: json)

**Что получаем:** Мигрированные данные в современном формате.

---

## Примеры использования

### Быстрый старт
```bash
# Анализ проекта
python intellirefactor analyze /path/to/project

# Поиск возможностей рефакторинга
python intellirefactor opportunities /path/to/project --limit 20

# Генерация плана рефакторинга
python intellirefactor decide analyze /path/to/project --output plan.json
python intellirefactor decide plan plan.json --format markdown
```

### Комплексный анализ
```bash
# Построение индекса
python intellirefactor index build /path/to/project

# Аудит проекта
python intellirefactor audit /path/to/project --emit-spec --emit-json

# Экспертный анализ
python intellirefactor expert-analyze /path/to/project /path/to/target_file.py --detailed
```

### Работа с дубликатами
```bash
# Найти все типы дубликатов
python intellirefactor duplicates blocks /path/to/project --show-code

# Найти семантически схожие методы
python intellirefactor duplicates similar /path/to/project --target-method MyClass.my_method --show-differences
```

### Документация
```bash
# Генерация всей документации
python intellirefactor docs generate /path/to/module.py --include architecture flowchart call_graph

# Генерация спецификаций
python intellirefactor generate spec /path/to/project --spec-type all
```

### Безопасный рефакторинг
```bash
# Пробный запуск
python intellirefactor refactor-enhanced /path/to/project plan.json --dry-run

# Интерактивный рефакторинг
python intellirefactor refactor-enhanced /path/to/project plan.json --interactive --create-backup
```